<policies>
    <inbound>
        <base />
        <return-response>
            <set-status code="200" />
            <set-header name="Content-Type" exists-action="override">
                <value>application/json</value>
            </set-header>
            <set-body>@{
                var baseUrl = context.Request.OriginalUrl.Scheme + "://" + context.Request.OriginalUrl.Host + context.Request.OriginalUrl.Port.ToString().Replace("443","").Replace("80","");
                if (!string.IsNullOrEmpty(context.Request.OriginalUrl.Port.ToString()) && context.Request.OriginalUrl.Port != 443 && context.Request.OriginalUrl.Port != 80) { baseUrl += ":" + context.Request.OriginalUrl.Port; }
                var card = new JObject(
                    new JProperty("name", "Summary Generator Agent"),
                    new JProperty("description", "An intelligent summary generator agent. I can help you create concise summaries of text content."),
                    new JProperty("url", baseUrl + "/summary-agent"),
                    new JProperty("version", "1.0.0"),
                    new JProperty("defaultInputModes", new JArray("text")),
                    new JProperty("defaultOutputModes", new JArray("text")),
                    new JProperty("capabilities", new JObject(
                        new JProperty("streaming", false),
                        new JProperty("pushNotifications", false)
                    )),
                    new JProperty("skills", new JArray(
                        new JObject(
                            new JProperty("id", "generate_summary"),
                            new JProperty("name", "Generate Text Summary"),
                            new JProperty("description", "Generates a concise summary of provided text content"),
                            new JProperty("tags", new JArray("summary", "text", "writing")),
                            new JProperty("examples", new JArray("Summarize this article", "Give me a brief summary"))
                        )
                    ))
                );
                return card.ToString();
            }</set-body>
        </return-response>
    </inbound>
    <backend>
        <base />
    </backend>
    <outbound>
        <base />
    </outbound>
    <on-error>
        <base />
    </on-error>
</policies>
