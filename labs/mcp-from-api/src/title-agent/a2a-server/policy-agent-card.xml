<policies>
    <inbound>
        <base />
        <return-response>
            <set-status code="200" />
            <set-header name="Content-Type" exists-action="override">
                <value>application/json</value>
            </set-header>
            <set-body>@{
                var baseUrl = context.Request.OriginalUrl.Scheme + "://" + context.Request.OriginalUrl.Host + context.Request.OriginalUrl.Port.ToString().Replace("443","").Replace("80","");
                if (!string.IsNullOrEmpty(context.Request.OriginalUrl.Port.ToString()) && context.Request.OriginalUrl.Port != 443 && context.Request.OriginalUrl.Port != 80) { baseUrl += ":" + context.Request.OriginalUrl.Port; }
                var card = new JObject(
                    new JProperty("name", "Title Generator Agent"),
                    new JProperty("description", "An intelligent title generator agent. I can help you generate catchy, SEO-friendly titles for your blog posts and articles."),
                    new JProperty("url", baseUrl + "/title-agent"),
                    new JProperty("version", "1.0.0"),
                    new JProperty("defaultInputModes", new JArray("text")),
                    new JProperty("defaultOutputModes", new JArray("text")),
                    new JProperty("capabilities", new JObject(
                        new JProperty("streaming", false),
                        new JProperty("pushNotifications", false)
                    )),
                    new JProperty("skills", new JArray(
                        new JObject(
                            new JProperty("id", "generate_title"),
                            new JProperty("name", "Generate Blog Title"),
                            new JProperty("description", "Generates a catchy, creative blog post title based on a topic"),
                            new JProperty("tags", new JArray("title", "blog", "writing")),
                            new JProperty("examples", new JArray("Generate a title about AI", "Give me a catchy title for cloud computing"))
                        )
                    ))
                );
                return card.ToString();
            }</set-body>
        </return-response>
    </inbound>
    <backend>
        <base />
    </backend>
    <outbound>
        <base />
    </outbound>
    <on-error>
        <base />
    </on-error>
</policies>
